parallel-ssh -t 0 -h vidur/prediction/config/hosts "pip3 install -U pip==25.0.1 && sudo apt update && sudo apt full-upgrade"
parallel-ssh -t 0 -h vidur/prediction/config/hosts "sudo apt install -y python3-pip python3-venv ccache"
parallel-ssh -t 0 -h vidur/prediction/config/hosts "wget https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2004/x86_64/cuda-ubuntu2004.pin && sudo mv cuda-ubuntu2004.pin /etc/apt/preferences.d/cuda-repository-pin-600"
parallel-ssh -t 0 -h vidur/prediction/config/hosts "wget https://developer.download.nvidia.com/compute/cuda/12.6.3/local_installers/cuda-repo-ubuntu2004-12-6-local_12.6.3-560.35.05-1_amd64.deb && sudo dpkg -i cuda-repo-ubuntu2004-12-6-local_12.6.3-560.35.05-1_amd64.deb"
parallel-ssh -t 0 -h vidur/prediction/config/hosts "sudo cp /var/cuda-repo-ubuntu2004-12-6-local/cuda-*-keyring.gpg /usr/share/keyrings/ && sudo apt-get update"
parallel-ssh -t 0 -h vidur/prediction/config/hosts "sudo dpkg --configure -a && sudo apt-get -y install cuda-toolkit-12-6 && sudo apt-get install -y nvidia-open"
parallel-ssh -t 0 -h vidur/prediction/config/hosts "export PATH=/usr/local/cuda/bin:\$PATH"
parallel-ssh -t 0 -h vidur/prediction/config/hosts "export LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:/users/asdwb/.local/lib/python3.10/site-packages/nvidia/cudnn/lib:/users/asdwb/.local/lib/python3.10/site-packages/nvidia/nccl/lib"
parallel-ssh -t 0 -h vidur/prediction/config/hosts "pip install flashinfer -i https://flashinfer.ai/whl/cu124/torch2.4"
parallel-ssh -t 0 -h vidur/prediction/config/hosts "git clone https://github.com/AKafakA/vllm.git && cd vllm && sudo VLLM_USE_PRECOMPILED=1 pip install --editable ."
parallel-ssh -t 0 -h vidur/prediction/config/hosts "git clone https://github.com/AKafakA/vidur_opt_scheduler.git && cd vidur_opt_scheduler && git checkout exp && pip install -r requirements.txt"